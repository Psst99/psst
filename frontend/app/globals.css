@import 'tailwindcss';

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }

  :root {
    --section-bg: #ffffff;
    --section-fg: #000000;
    --section-accent: var(--section-bg);

    --panel-bg: var(--section-bg);
    --panel-fg: var(--section-fg);

    --home-nav-h: 31px;

    --rounded-sm: 0.125rem;
    --rounded: 0.25rem;
    --rounded-md: 0.375rem;
    --rounded-lg: 0.5rem;
    --rounded-xl: 0.75rem;
    --rounded-2xl: 1rem;
    --rounded-3xl: 1.5rem;
    --rounded-full: 9999px;
  }

  :root[data-rounded='false'] {
    --rounded-sm: 0;
    --rounded: 0;
    --rounded-md: 0;
    --rounded-lg: 0;
    --rounded-xl: 0;
    --rounded-2xl: 0;
    --rounded-3xl: 0;
    --rounded-full: 0;
  }

  :root[data-theme='accessible'] {
    --section-bg: #ffffff;
    --section-fg: #000000;
    --section-accent: var(--section-fg);

    --panel-bg: #ffffff;
    --panel-fg: #000000;
  }

  /* optional: make borders slightly darker */
  :root[data-theme='accessible'] .section-border,
  :root[data-theme='accessible'] .panel-border {
    border-color: #000000;
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body::-webkit-scrollbar,
  html::-webkit-scrollbar {
    display: none;
  }

  body,
  html {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  /* Use Geist for bold text */
  strong,
  b,
  .font-bold {
    font-family: var(--font-karrik), var(--font-geist-sans);
    font-weight: 500;
    letter-spacing: -0.02em;
    font-size: 1.1em;
  }

  .font-mono {
    font-family: var(--font-geist-mono);
  }
}

@utility no-scrollbar {
  &::-webkit-scrollbar {
    display: none;
  }
  -ms-overflow-style: none;
  scrollbar-width: none;
}

@layer utilities {
  .panel-bg {
    background-color: var(--panel-bg);
  }

  .panel-fg {
    color: var(--panel-fg);
  }

  .invert-panel {
    background-color: var(--panel-fg);
    color: var(--panel-bg);
  }

  .invert-panel-border {
    border-color: var(--panel-bg);
  }

  .panel-border {
    border-color: var(--panel-fg);
  }

  .section-bg {
    background-color: var(--section-bg);
  }

  .section-fg {
    color: var(--section-fg);
  }

  .section-border {
    border-color: var(--section-fg);
  }

  .tab-inactive {
    background-color: var(--section-bg);
    color: var(--section-fg);
    border-color: var(--section-fg);
  }

  .tab-active {
    background-color: var(--section-fg);
    color: var(--section-bg);
    border-color: var(--section-bg);
  }

  .tabs-topline {
    position: relative;
  }

  .panel-tab-inactive {
    background-color: #ffffff;
    color: var(--panel-fg);
    border-color: var(--panel-fg);
  }

  .panel-tab-active {
    background-color: var(--panel-fg);
    color: var(--panel-bg);
    border-color: var(--panel-fg);
  }

  .tabs-topline::before {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 1px;
    background: var(--section-fg);
    z-index: 1;
    pointer-events: none;
  }

  /* Override ALL rounded classes including responsive variants */
  [class*='rounded-sm'] {
    border-radius: var(--rounded-sm) !important;
  }
  [class*='rounded-md'] {
    border-radius: var(--rounded-md) !important;
  }
  [class*='rounded-lg'] {
    border-radius: var(--rounded-lg) !important;
  }
  [class*='rounded-xl'] {
    border-radius: var(--rounded-xl) !important;
  }
  [class*='rounded-2xl'] {
    border-radius: var(--rounded-2xl) !important;
  }
  [class*='rounded-3xl'] {
    border-radius: var(--rounded-3xl) !important;
  }
  [class*='rounded-full'] {
    border-radius: var(--rounded-full) !important;
  }

  /* Base rounded class */
  .rounded {
    border-radius: var(--rounded) !important;
  }

  /* Individual corner overrides - all variations */
  [class*='rounded-t-'] {
    border-top-left-radius: var(--rounded-lg) !important;
    border-top-right-radius: var(--rounded-lg) !important;
  }
  [class*='rounded-b-'] {
    border-bottom-left-radius: var(--rounded-lg) !important;
    border-bottom-right-radius: var(--rounded-lg) !important;
  }
  [class*='rounded-l-'] {
    border-top-left-radius: var(--rounded-md) !important;
    border-bottom-left-radius: var(--rounded-md) !important;
  }
  [class*='rounded-r-'] {
    border-top-right-radius: var(--rounded-2xl) !important;
    border-bottom-right-radius: var(--rounded-2xl) !important;
  }
  [class*='rounded-tl-'] {
    border-top-left-radius: var(--rounded-md) !important;
  }
  [class*='rounded-tr-'] {
    border-top-right-radius: var(--rounded-2xl) !important;
  }
  [class*='rounded-bl-'] {
    border-bottom-left-radius: var(--rounded-lg) !important;
  }
  [class*='rounded-br-'] {
    border-bottom-right-radius: var(--rounded-lg) !important;
  }

  /* Specific size overrides for corners */
  .rounded-t-xl,
  [class*='rounded-t-xl'] {
    border-top-left-radius: var(--rounded-xl) !important;
    border-top-right-radius: var(--rounded-xl) !important;
  }
  .rounded-t-2xl,
  [class*='rounded-t-2xl'] {
    border-top-left-radius: var(--rounded-2xl) !important;
    border-top-right-radius: var(--rounded-2xl) !important;
  }
  .rounded-t-3xl,
  [class*='rounded-t-3xl'] {
    border-top-left-radius: var(--rounded-3xl) !important;
    border-top-right-radius: var(--rounded-3xl) !important;
  }
  .rounded-tr-2xl,
  [class*='rounded-tr-2xl'] {
    border-top-right-radius: var(--rounded-2xl) !important;
  }
  .rounded-tl-md,
  [class*='rounded-tl-md'] {
    border-top-left-radius: var(--rounded-md) !important;
  }
  .rounded-r-2xl,
  [class*='rounded-r-2xl'] {
    border-top-right-radius: var(--rounded-2xl) !important;
    border-bottom-right-radius: var(--rounded-2xl) !important;
  }

  /* None overrides */
  [class*='rounded-t-none'] {
    border-top-left-radius: 0 !important;
    border-top-right-radius: 0 !important;
  }
  [class*='rounded-l-none'] {
    border-top-left-radius: 0 !important;
    border-bottom-left-radius: 0 !important;
  }
}

/* View Transitions - exactly like the working example */
::view-transition-group(root) {
  z-index: auto !important;
}

::view-transition-image-pair(root) {
  isolation: isolate;
  will-change: transform, opacity, scale;
  z-index: 1;
}

/* defaults */
::view-transition-new(root) {
  z-index: 2;
  animation: none !important;
}
::view-transition-old(root) {
  z-index: 1;
  animation: none !important;
}

/* close override (must be after defaults) */
:root.vt-close::view-transition-new(root) {
  z-index: 1 !important;
}
:root.vt-close::view-transition-old(root) {
  z-index: 2 !important;
}

/* Keep soundcloud player fixed during transitions */
.soundcloud-player-fixed {
  view-transition-name: soundcloud-player;
}

::view-transition-group(soundcloud-player) {
  z-index: 9999;
}

::view-transition-old(soundcloud-player),
::view-transition-new(soundcloud-player) {
  animation: none;
  mix-blend-mode: normal;
}

/* Keep support button fixed during transitions */
.support-widget-fixed {
  view-transition-name: support-widget;
}

::view-transition-group(support-widget) {
  z-index: 9999;
}

::view-transition-old(support-widget),
::view-transition-new(support-widget) {
  animation: none;
  mix-blend-mode: normal;
}

/* Keep toggle buttons fixed during page transitions */
.theme-toggle-fixed {
  view-transition-name: theme-toggle;
}

.rounded-toggle-fixed {
  view-transition-name: rounded-toggle;
}

::view-transition-group(theme-toggle),
::view-transition-group(rounded-toggle) {
  z-index: 9999 !important;
}

::view-transition-old(theme-toggle),
::view-transition-new(theme-toggle),
::view-transition-old(rounded-toggle),
::view-transition-new(rounded-toggle) {
  animation: none !important;
  mix-blend-mode: normal;
}

.sub-navigation-underline::after {
  content: '';
  display: block;
  position: absolute;
  left: 0;
  right: 0;
  bottom: -1px;
  height: 1px;
  background: var(--underline-color, currentColor);
}

.section-underline::after {
  content: '';
  display: block;
  position: absolute;
  left: 0;
  right: 0;
  bottom: -1px;
  height: 1px;
  background: var(--underline-color, currentColor);
}

.mobile-subsection-underline::after {
  content: '';
  display: block;
  position: absolute;
  right: -1px;
  top: 28px;
  width: calc(100% + 2px);
  height: 20px;

  background: var(--panel-bg);

  /* key change: border-top uses a dedicated var */
  border-top: 1px solid var(--subsection-underline-top, var(--panel-fg));

  border-left: 1px solid var(--panel-bg);
  z-index: 10000;
  border-right: 1px solid var(--panel-fg);
  border-top-right-radius: var(--rounded-lg);
}

.subsection-vertical-border::after {
  content: '';
  position: absolute;
  right: -1px;
  top: 0;
  bottom: 0;
  width: 1px;
  z-index: 10000;
  background: var(--panel-fg);
}

.mobile-subsection-underline--psst::after {
  border-top: 1px solid var(--panel-bg);
  border-left: 2px solid var(--panel-fg);
  border-right: 2px solid var(--panel-fg);
}

.mobile-section-connector {
  position: relative;
  overflow: visible;
}

.mobile-section-connector::after {
  content: '';
  display: block;
  position: absolute;
  right: -1px;
  top: 28px; /* aligns with your 29px header rhythm */
  width: calc(100% + 2px);
  height: 6px;

  background: var(--panel-bg);

  /* key: allow overriding the top line color like you do for psst */
  border-top: 1px solid var(--section-underline-top, var(--panel-fg));

  /* avoid seam on the left edge */
  border-left: 1px solid var(--panel-bg);

  border-right: 1px solid var(--panel-fg);
  border-top-right-radius: var(--rounded-lg);

  z-index: 10000;
  pointer-events: none;
}

.font-mono {
  font-family: var(--font-geist-mono);
}

/* React DatePicker - Fix width and alignment */
.react-datepicker-wrapper {
  width: 100%;
}

.react-datepicker__input-container {
  width: 100%;
}

.artist-open-pending {
  position: relative;
  overflow: hidden;
  box-shadow: 0 0 0 1px color-mix(in oklab, var(--section-bg) 35%, transparent);
}

.artist-open-pending::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: linear-gradient(
    110deg,
    transparent 0%,
    color-mix(in oklab, var(--section-bg) 22%, white) 42%,
    color-mix(in oklab, var(--section-bg) 45%, white) 50%,
    color-mix(in oklab, var(--section-bg) 22%, white) 58%,
    transparent 100%
  );
  transform: translateX(-120%);
  animation: artist-open-sweep 1s ease-in-out infinite;
  opacity: 0.65;
}

@keyframes artist-open-sweep {
  0% {
    transform: translateX(-120%);
  }
  100% {
    transform: translateX(120%);
  }
}
